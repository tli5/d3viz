<!DOCTYPE html>
<html>
    <head>
        <script src="d3.min.js" charset="utf-8"></script>
    </head>
    <body>
    <script>
        let h = 100;
        let w = 400;

        function buildLine(ds) {
            let lineFun = d3.svg.line()
                            .x(d => (d.month-20130001)/3.25)
                            .y(d => h-d.sales)
                            .interpolate("linear");

            let svg = d3.select("body").append("svg")
                        .attr({
                            width: w,
                            height: h
                        });

            let viz = svg.append("path")
                        .attr({
                            d: lineFun(ds.monthlySales),
                            "stroke": "purple",
                            "stroke-width": 2,
                            "fill": "none"
                        });
        }

        function showHeader(ds) {
            d3.select("body")
              .append("h1")
              .text(ds.category + " Sales (2013)");
                
        }

        d3.json("monthlySalesbyCategoryMultiple.json", function(error, data){
            if (error) {
                console.log(error);
            }
            
            data.contents.forEach(ds => {
                console.log(ds);
                showHeader(ds);
                buildLine(ds);
                
            });
        });
        
    </script>
    </body>
</html>